!function n(e,t,r){function o(u,i){if(!t[u]){if(!e[u]){var s="function"==typeof require&&require;if(!i&&s)return s(u,!0);if(a)return a(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[u]={exports:{}};e[u][0].call(l.exports,function(n){var t=e[u][1][n];return o(t?t:n)},l,l.exports,n,e,t,r)}return t[u].exports}for(var a="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({"/Users/PRASS/Documents/Akufen/lunch-and-learn/MVC-01-2016/src/js/custom/Main.js":[function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),u=n("./views/Nav"),i=r(u),s=n("./views/Content"),c=r(s),l=n("./ctrl/Controller"),f=r(l),d=n("./model/DataManager"),v=r(d),w=function(){function n(){o(this,n),console.log("Entry Point"),$(this.init.bind(this))}return a(n,[{key:"init",value:function(){console.log("Dom ready"),this.nav=new i["default"],this.content=new c["default"],this.ctrl=new f["default"],$(window).one("data_loaded",this.start.bind(this)),v["default"].load()}},{key:"start",value:function(){console.log("start"),this.nav.build(v["default"].data.nav)}}]),n}();new w},{"./ctrl/Controller":"/Users/PRASS/Documents/Akufen/lunch-and-learn/MVC-01-2016/src/js/custom/ctrl/Controller.js","./model/DataManager":"/Users/PRASS/Documents/Akufen/lunch-and-learn/MVC-01-2016/src/js/custom/model/DataManager.js","./views/Content":"/Users/PRASS/Documents/Akufen/lunch-and-learn/MVC-01-2016/src/js/custom/views/Content.js","./views/Nav":"/Users/PRASS/Documents/Akufen/lunch-and-learn/MVC-01-2016/src/js/custom/views/Nav.js"}],"/Users/PRASS/Documents/Akufen/lunch-and-learn/MVC-01-2016/src/js/custom/ctrl/Controller.js":[function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n("../model/DataManager"),i=r(u),s=function(){function n(){o(this,n),$(window).on("new_content_request",this.displayNewContent.bind(this))}return a(n,[{key:"displayNewContent",value:function(n,e){console.log("Controller :: Request for new content");var t=i["default"].getPic(e);$(window).trigger("display_new_content",t)}}]),n}();t["default"]=s},{"../model/DataManager":"/Users/PRASS/Documents/Akufen/lunch-and-learn/MVC-01-2016/src/js/custom/model/DataManager.js"}],"/Users/PRASS/Documents/Akufen/lunch-and-learn/MVC-01-2016/src/js/custom/model/DataManager.js":[function(n,e,t){"use strict";function r(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function n(){r(this,n)}return o(n,null,[{key:"load",value:function(){$.ajax({type:"GET",dataType:"json",url:"data/data.json",success:function(e){n.data=e,$(window).trigger("data_loaded")},error:function(n){console.error("Data error: ",n)}})}},{key:"getPic",value:function(e){return console.log("DataManager :: get Pic :: ",n.data.pics[e]),n.data.pics[e]}}]),n}();t["default"]=a},{}],"/Users/PRASS/Documents/Akufen/lunch-and-learn/MVC-01-2016/src/js/custom/views/Content.js":[function(n,e,t){"use strict";function r(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function n(){r(this,n),console.log("Content"),this.view=$("section.content"),$(window).on("display_new_content",this.onDisplayNewContent.bind(this))}return o(n,[{key:"onDisplayNewContent",value:function(n,e){console.log("Content :: Display new content "),this.view[0].style.backgroundImage="url("+e+")"}}]),n}();t["default"]=a},{}],"/Users/PRASS/Documents/Akufen/lunch-and-learn/MVC-01-2016/src/js/custom/views/Nav.js":[function(n,e,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n("./NavItem"),i=r(u),s=function(){function n(){o(this,n),this.view=$("nav")}return a(n,[{key:"build",value:function(n){var e=this;$.each(n,function(n,t){new i["default"](e.view,t,n)});var t=this.view.find(".nav-item");t.on("click",this.onClickNavItem.bind(this))}},{key:"onClickNavItem",value:function(n){var e=n.target.getAttribute("data-id");console.log("Nav :: Click on item #",e),$(window).trigger("new_content_request",e)}}]),n}();t["default"]=s},{"./NavItem":"/Users/PRASS/Documents/Akufen/lunch-and-learn/MVC-01-2016/src/js/custom/views/NavItem.js"}],"/Users/PRASS/Documents/Akufen/lunch-and-learn/MVC-01-2016/src/js/custom/views/NavItem.js":[function(n,e,t){"use strict";function r(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function n(e,t,o){r(this,n),e.find("ul").append('<li class="nav-item n'+o+'" data-id="'+o+'">'+t.label+"</li>"),this.view=e.find("ul .nav-item.n"+o),this.view.on("mouseover",this.onMouseOver.bind(this)),this.view.on("mouseout",this.onMouseOut.bind(this))}return o(n,[{key:"onMouseOver",value:function(){this.view[0].style.backgroundColor="red"}},{key:"onMouseOut",value:function(){this.view[0].style.backgroundColor="transparent"}}]),n}();t["default"]=a},{}]},{},["/Users/PRASS/Documents/Akufen/lunch-and-learn/MVC-01-2016/src/js/custom/Main.js"]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC5qcyIsInNyYy9qcy9jdXN0b20vTWFpbi5qcyIsInNyYy9qcy9jdXN0b20vY3RybC9Db250cm9sbGVyLmpzIiwic3JjL2pzL2N1c3RvbS9tb2RlbC9EYXRhTWFuYWdlci5qcyIsInNyYy9qcy9jdXN0b20vdmlld3MvQ29udGVudC5qcyIsInNyYy9qcy9jdXN0b20vdmlld3MvTmF2LmpzIiwic3JjL2pzL2N1c3RvbS92aWV3cy9OYXZJdGVtLmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJmIiwiRXJyb3IiLCJjb2RlIiwibCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiL1VzZXJzL1BSQVNTL0RvY3VtZW50cy9Ba3VmZW4vbHVuY2gtYW5kLWxlYXJuL01WQy0wMS0yMDE2L3NyYy9qcy9jdXN0b20vTWFpbi5qcyIsIm1vZHVsZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJfTmF2IiwiX05hdjIiLCJfQ29udGVudCIsIl9Db250ZW50MiIsIl9Db250cm9sbGVyIiwiX0NvbnRyb2xsZXIyIiwiX0RhdGFNYW5hZ2VyIiwiX0RhdGFNYW5hZ2VyMiIsIk1haW4iLCJ0aGlzIiwiY29uc29sZSIsImxvZyIsIiQiLCJpbml0IiwiYmluZCIsInZhbHVlIiwibmF2IiwiY29udGVudCIsImN0cmwiLCJ3aW5kb3ciLCJvbmUiLCJzdGFydCIsImxvYWQiLCJidWlsZCIsImRhdGEiLCIuL2N0cmwvQ29udHJvbGxlciIsIi4vbW9kZWwvRGF0YU1hbmFnZXIiLCIuL3ZpZXdzL0NvbnRlbnQiLCIuL3ZpZXdzL05hdiIsIi9Vc2Vycy9QUkFTUy9Eb2N1bWVudHMvQWt1ZmVuL2x1bmNoLWFuZC1sZWFybi9NVkMtMDEtMjAxNi9zcmMvanMvY3VzdG9tL2N0cmwvQ29udHJvbGxlci5qcyIsIkNvbnRyb2xsZXIiLCJvbiIsImRpc3BsYXlOZXdDb250ZW50IiwiZXZlbnQiLCJ0YXJnZXRJRCIsInBpY1VybCIsImdldFBpYyIsInRyaWdnZXIiLCIuLi9tb2RlbC9EYXRhTWFuYWdlciIsIi9Vc2Vycy9QUkFTUy9Eb2N1bWVudHMvQWt1ZmVuL2x1bmNoLWFuZC1sZWFybi9NVkMtMDEtMjAxNi9zcmMvanMvY3VzdG9tL21vZGVsL0RhdGFNYW5hZ2VyLmpzIiwiRGF0YU1hbmFnZXIiLCJhamF4IiwidHlwZSIsImRhdGFUeXBlIiwidXJsIiwic3VjY2VzcyIsInJlc3BvbnNlIiwiZXJyb3IiLCJlcnIiLCJpdGVtSUQiLCJwaWNzIiwiL1VzZXJzL1BSQVNTL0RvY3VtZW50cy9Ba3VmZW4vbHVuY2gtYW5kLWxlYXJuL01WQy0wMS0yMDE2L3NyYy9qcy9jdXN0b20vdmlld3MvQ29udGVudC5qcyIsIkNvbnRlbnQiLCJ2aWV3Iiwib25EaXNwbGF5TmV3Q29udGVudCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiL1VzZXJzL1BSQVNTL0RvY3VtZW50cy9Ba3VmZW4vbHVuY2gtYW5kLWxlYXJuL01WQy0wMS0yMDE2L3NyYy9qcy9jdXN0b20vdmlld3MvTmF2LmpzIiwiX05hdkl0ZW0iLCJfTmF2SXRlbTIiLCJOYXYiLCJuYXZEYXRhIiwiX3RoaXMiLCJlYWNoIiwibmF2SXRlbXMiLCJmaW5kIiwib25DbGlja05hdkl0ZW0iLCJnZXRBdHRyaWJ1dGUiLCIuL05hdkl0ZW0iLCIvVXNlcnMvUFJBU1MvRG9jdW1lbnRzL0FrdWZlbi9sdW5jaC1hbmQtbGVhcm4vTVZDLTAxLTIwMTYvc3JjL2pzL2N1c3RvbS92aWV3cy9OYXZJdGVtLmpzIiwiTmF2SXRlbSIsInBhcmVudFZpZXciLCJpZCIsImFwcGVuZCIsImxhYmVsIiwib25Nb3VzZU92ZXIiLCJvbk1vdXNlT3V0IiwiYmFja2dyb3VuZENvbG9yIl0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFBQSxHQUFBQyxFQUFBQyxFQUFBQyxHQUFBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQUEsSUFBQUosRUFBQUcsR0FBQSxDQUFBLElBQUFKLEVBQUFJLEdBQUEsQ0FBQSxHQUFBRSxHQUFBLGtCQUFBQyxVQUFBQSxPQUFBLEtBQUFGLEdBQUFDLEVBQUEsTUFBQUEsR0FBQUYsR0FBQSxFQUFBLElBQUFJLEVBQUEsTUFBQUEsR0FBQUosR0FBQSxFQUFBLElBQUFLLEdBQUEsR0FBQUMsT0FBQSx1QkFBQU4sRUFBQSxJQUFBLE1BQUFLLEdBQUFFLEtBQUEsbUJBQUFGLEVBQUEsR0FBQUcsR0FBQVgsRUFBQUcsSUFBQVMsV0FBQWIsR0FBQUksR0FBQSxHQUFBVSxLQUFBRixFQUFBQyxRQUFBLFNBQUFkLEdBQUEsR0FBQUUsR0FBQUQsRUFBQUksR0FBQSxHQUFBTCxFQUFBLE9BQUFJLEdBQUFGLEVBQUFBLEVBQUFGLElBQUFhLEVBQUFBLEVBQUFDLFFBQUFkLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsTUFBQUQsR0FBQUcsR0FBQVMsUUFBQSxJQUFBLEdBQUFMLEdBQUEsa0JBQUFELFVBQUFBLFFBQUFILEVBQUEsRUFBQUEsRUFBQUYsRUFBQWEsT0FBQVgsSUFBQUQsRUFBQUQsRUFBQUUsR0FBQSxPQUFBRCxLQUFBYSxtRkFBQSxTQUFBVCxFQUFBVSxFQUFBSixHQ0NBLFlBb0JBLFNBQVNLLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFVBQVNGLEdBRXZGLFFBQVNHLEdBQWdCQyxFQUFVQyxHQUFl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QyxNQWJBdkIsR01yUktvRixJTnNSSjFFLElBQUssY0FDTG1CLE1BQU8sV016UVBOLEtBQUs0QyxLQUFLLEdBQUdFLE1BQU1zQixnQkFBa0IsU044UXJDakYsSUFBSyxhQUNMbUIsTUFBTyxXTTFRUE4sS0FBSzRDLEtBQUssR0FBR0UsTUFBTXNCLGdCQUFrQixrQkFuQmpDUCxJTnFTTmpHLEdBQUFBLFdNN1FlaUcsWU4rUUoiLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHtcIi9Vc2Vycy9QUkFTUy9Eb2N1bWVudHMvQWt1ZmVuL2x1bmNoLWFuZC1sZWFybi9NVkMtMDEtMjAxNi9zcmMvanMvY3VzdG9tL01haW4uanNcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfTmF2ID0gcmVxdWlyZSgnLi92aWV3cy9OYXYnKTtcblxudmFyIF9OYXYyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTmF2KTtcblxudmFyIF9Db250ZW50ID0gcmVxdWlyZSgnLi92aWV3cy9Db250ZW50Jyk7XG5cbnZhciBfQ29udGVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db250ZW50KTtcblxudmFyIF9Db250cm9sbGVyID0gcmVxdWlyZSgnLi9jdHJsL0NvbnRyb2xsZXInKTtcblxudmFyIF9Db250cm9sbGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NvbnRyb2xsZXIpO1xuXG52YXIgX0RhdGFNYW5hZ2VyID0gcmVxdWlyZSgnLi9tb2RlbC9EYXRhTWFuYWdlcicpO1xuXG52YXIgX0RhdGFNYW5hZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFNYW5hZ2VyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyoqXG4gKiBcbiAqKi9cblxudmFyIE1haW4gPSBmdW5jdGlvbiAoKSB7XG5cdGZ1bmN0aW9uIE1haW4oKSB7XG5cdFx0X2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1haW4pO1xuXG5cdFx0Y29uc29sZS5sb2coXCJFbnRyeSBQb2ludFwiKTtcblxuXHRcdCQodGhpcy5pbml0LmJpbmQodGhpcykpO1xuXHRcdC8vZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgdGhpcy5pbml0LmJpbmQodGhpcyksIGZhbHNlKTtcblx0fVxuXG5cdF9jcmVhdGVDbGFzcyhNYWluLCBbe1xuXHRcdGtleTogJ2luaXQnLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuXG5cdFx0XHRjb25zb2xlLmxvZyhcIkRvbSByZWFkeVwiKTtcblxuXHRcdFx0Ly8gMSkgQ3JlYXRlIHZpZXdcblx0XHRcdHRoaXMubmF2ID0gbmV3IF9OYXYyLmRlZmF1bHQoKTtcblx0XHRcdHRoaXMuY29udGVudCA9IG5ldyBfQ29udGVudDIuZGVmYXVsdCgpO1xuXG5cdFx0XHQvLyAyKSBDcmVhdGUgQ29udHJvbGxlclxuXHRcdFx0dGhpcy5jdHJsID0gbmV3IF9Db250cm9sbGVyMi5kZWZhdWx0KCk7XG5cblx0XHRcdC8vIDMpIEdldCBEYXRhIChtb2RlbClcblx0XHRcdCQod2luZG93KS5vbmUoJ2RhdGFfbG9hZGVkJywgdGhpcy5zdGFydC5iaW5kKHRoaXMpKTtcblx0XHRcdF9EYXRhTWFuYWdlcjIuZGVmYXVsdC5sb2FkKCk7XG5cdFx0fVxuXHR9LCB7XG5cdFx0a2V5OiAnc3RhcnQnLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiBzdGFydCgpIHtcblxuXHRcdFx0Y29uc29sZS5sb2coJ3N0YXJ0Jyk7XG5cblx0XHRcdHRoaXMubmF2LmJ1aWxkKF9EYXRhTWFuYWdlcjIuZGVmYXVsdC5kYXRhLm5hdik7XG5cdFx0fVxuXHR9XSk7XG5cblx0cmV0dXJuIE1haW47XG59KCk7XG5cbnZhciBhcHAgPSBuZXcgTWFpbigpO1xuXG59LHtcIi4vY3RybC9Db250cm9sbGVyXCI6XCIvVXNlcnMvUFJBU1MvRG9jdW1lbnRzL0FrdWZlbi9sdW5jaC1hbmQtbGVhcm4vTVZDLTAxLTIwMTYvc3JjL2pzL2N1c3RvbS9jdHJsL0NvbnRyb2xsZXIuanNcIixcIi4vbW9kZWwvRGF0YU1hbmFnZXJcIjpcIi9Vc2Vycy9QUkFTUy9Eb2N1bWVudHMvQWt1ZmVuL2x1bmNoLWFuZC1sZWFybi9NVkMtMDEtMjAxNi9zcmMvanMvY3VzdG9tL21vZGVsL0RhdGFNYW5hZ2VyLmpzXCIsXCIuL3ZpZXdzL0NvbnRlbnRcIjpcIi9Vc2Vycy9QUkFTUy9Eb2N1bWVudHMvQWt1ZmVuL2x1bmNoLWFuZC1sZWFybi9NVkMtMDEtMjAxNi9zcmMvanMvY3VzdG9tL3ZpZXdzL0NvbnRlbnQuanNcIixcIi4vdmlld3MvTmF2XCI6XCIvVXNlcnMvUFJBU1MvRG9jdW1lbnRzL0FrdWZlbi9sdW5jaC1hbmQtbGVhcm4vTVZDLTAxLTIwMTYvc3JjL2pzL2N1c3RvbS92aWV3cy9OYXYuanNcIn1dLFwiL1VzZXJzL1BSQVNTL0RvY3VtZW50cy9Ba3VmZW4vbHVuY2gtYW5kLWxlYXJuL01WQy0wMS0yMDE2L3NyYy9qcy9jdXN0b20vY3RybC9Db250cm9sbGVyLmpzXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0dmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX0RhdGFNYW5hZ2VyID0gcmVxdWlyZSgnLi4vbW9kZWwvRGF0YU1hbmFnZXInKTtcblxudmFyIF9EYXRhTWFuYWdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhTWFuYWdlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuXHRmdW5jdGlvbiBDb250cm9sbGVyKCkge1xuXHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250cm9sbGVyKTtcblxuXHRcdCQod2luZG93KS5vbignbmV3X2NvbnRlbnRfcmVxdWVzdCcsIHRoaXMuZGlzcGxheU5ld0NvbnRlbnQuYmluZCh0aGlzKSk7XG5cdH1cblxuXHRfY3JlYXRlQ2xhc3MoQ29udHJvbGxlciwgW3tcblx0XHRrZXk6ICdkaXNwbGF5TmV3Q29udGVudCcsXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIGRpc3BsYXlOZXdDb250ZW50KGV2ZW50LCB0YXJnZXRJRCkge1xuXG5cdFx0XHRjb25zb2xlLmxvZygnQ29udHJvbGxlciA6OiBSZXF1ZXN0IGZvciBuZXcgY29udGVudCcpO1xuXG5cdFx0XHR2YXIgcGljVXJsID0gX0RhdGFNYW5hZ2VyMi5kZWZhdWx0LmdldFBpYyh0YXJnZXRJRCk7XG5cblx0XHRcdCQod2luZG93KS50cmlnZ2VyKCdkaXNwbGF5X25ld19jb250ZW50JywgcGljVXJsKTtcblx0XHR9XG5cdH1dKTtcblxuXHRyZXR1cm4gQ29udHJvbGxlcjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQ29udHJvbGxlcjtcblxufSx7XCIuLi9tb2RlbC9EYXRhTWFuYWdlclwiOlwiL1VzZXJzL1BSQVNTL0RvY3VtZW50cy9Ba3VmZW4vbHVuY2gtYW5kLWxlYXJuL01WQy0wMS0yMDE2L3NyYy9qcy9jdXN0b20vbW9kZWwvRGF0YU1hbmFnZXIuanNcIn1dLFwiL1VzZXJzL1BSQVNTL0RvY3VtZW50cy9Ba3VmZW4vbHVuY2gtYW5kLWxlYXJuL01WQy0wMS0yMDE2L3NyYy9qcy9jdXN0b20vbW9kZWwvRGF0YU1hbmFnZXIuanNcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIERhdGFNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEYXRhTWFuYWdlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGF0YU1hbmFnZXIpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKERhdGFNYW5hZ2VyLCBudWxsLCBbe1xuICAgIGtleTogXCJsb2FkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQoKSB7XG5cbiAgICAgICQuYWpheCh7XG4gICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgICAgdXJsOiAnZGF0YS9kYXRhLmpzb24nLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICBEYXRhTWFuYWdlci5kYXRhID0gcmVzcG9uc2U7XG5cbiAgICAgICAgICAkKHdpbmRvdykudHJpZ2dlcignZGF0YV9sb2FkZWQnKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhIGVycm9yOiBcIiwgZXJyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFBpY1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQaWMoaXRlbUlEKSB7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdEYXRhTWFuYWdlciA6OiBnZXQgUGljIDo6ICcsIERhdGFNYW5hZ2VyLmRhdGEucGljc1tpdGVtSURdKTtcblxuICAgICAgcmV0dXJuIERhdGFNYW5hZ2VyLmRhdGEucGljc1tpdGVtSURdO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEYXRhTWFuYWdlcjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU1hbmFnZXI7XG5cbn0se31dLFwiL1VzZXJzL1BSQVNTL0RvY3VtZW50cy9Ba3VmZW4vbHVuY2gtYW5kLWxlYXJuL01WQy0wMS0yMDE2L3NyYy9qcy9jdXN0b20vdmlld3MvQ29udGVudC5qc1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdHZhbHVlOiB0cnVlXG59KTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG5cdGZ1bmN0aW9uIENvbnRlbnQoKSB7XG5cdFx0X2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRlbnQpO1xuXG5cdFx0Y29uc29sZS5sb2coJ0NvbnRlbnQnKTtcblxuXHRcdHRoaXMudmlldyA9ICQoJ3NlY3Rpb24uY29udGVudCcpO1xuXG5cdFx0JCh3aW5kb3cpLm9uKCdkaXNwbGF5X25ld19jb250ZW50JywgdGhpcy5vbkRpc3BsYXlOZXdDb250ZW50LmJpbmQodGhpcykpO1xuXHR9XG5cblx0X2NyZWF0ZUNsYXNzKENvbnRlbnQsIFt7XG5cdFx0a2V5OiAnb25EaXNwbGF5TmV3Q29udGVudCcsXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIG9uRGlzcGxheU5ld0NvbnRlbnQoZXZlbnQsIHBpY1VybCkge1xuXG5cdFx0XHRjb25zb2xlLmxvZygnQ29udGVudCA6OiBEaXNwbGF5IG5ldyBjb250ZW50ICcpO1xuXG5cdFx0XHR0aGlzLnZpZXdbMF0uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgcGljVXJsICsgJyknO1xuXHRcdH1cblx0fV0pO1xuXG5cdHJldHVybiBDb250ZW50O1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBDb250ZW50O1xuXG59LHt9XSxcIi9Vc2Vycy9QUkFTUy9Eb2N1bWVudHMvQWt1ZmVuL2x1bmNoLWFuZC1sZWFybi9NVkMtMDEtMjAxNi9zcmMvanMvY3VzdG9tL3ZpZXdzL05hdi5qc1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9OYXZJdGVtID0gcmVxdWlyZSgnLi9OYXZJdGVtJyk7XG5cbnZhciBfTmF2SXRlbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9OYXZJdGVtKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIE5hdiA9IGZ1bmN0aW9uICgpIHtcblx0ZnVuY3Rpb24gTmF2KCkge1xuXHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOYXYpO1xuXG5cdFx0dGhpcy52aWV3ID0gJCgnbmF2Jyk7XG5cdH1cblxuXHRfY3JlYXRlQ2xhc3MoTmF2LCBbe1xuXHRcdGtleTogJ2J1aWxkJyxcblx0XHR2YWx1ZTogZnVuY3Rpb24gYnVpbGQobmF2RGF0YSkge1xuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdFx0JC5lYWNoKG5hdkRhdGEsIGZ1bmN0aW9uIChpLCBkYXRhKSB7XG5cblx0XHRcdFx0dmFyIGl0ZW0gPSBuZXcgX05hdkl0ZW0yLmRlZmF1bHQoX3RoaXMudmlldywgZGF0YSwgaSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0dmFyIG5hdkl0ZW1zID0gdGhpcy52aWV3LmZpbmQoJy5uYXYtaXRlbScpO1xuXG5cdFx0XHRuYXZJdGVtcy5vbignY2xpY2snLCB0aGlzLm9uQ2xpY2tOYXZJdGVtLmJpbmQodGhpcykpO1xuXHRcdH1cblx0fSwge1xuXHRcdGtleTogJ29uQ2xpY2tOYXZJdGVtJyxcblx0XHR2YWx1ZTogZnVuY3Rpb24gb25DbGlja05hdkl0ZW0oZXZlbnQpIHtcblxuXHRcdFx0dmFyIHRhcmdldElEID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuXG5cdFx0XHRjb25zb2xlLmxvZygnTmF2IDo6IENsaWNrIG9uIGl0ZW0gIycsIHRhcmdldElEKTtcblxuXHRcdFx0JCh3aW5kb3cpLnRyaWdnZXIoJ25ld19jb250ZW50X3JlcXVlc3QnLCB0YXJnZXRJRCk7XG5cdFx0fVxuXHR9XSk7XG5cblx0cmV0dXJuIE5hdjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gTmF2O1xuXG59LHtcIi4vTmF2SXRlbVwiOlwiL1VzZXJzL1BSQVNTL0RvY3VtZW50cy9Ba3VmZW4vbHVuY2gtYW5kLWxlYXJuL01WQy0wMS0yMDE2L3NyYy9qcy9jdXN0b20vdmlld3MvTmF2SXRlbS5qc1wifV0sXCIvVXNlcnMvUFJBU1MvRG9jdW1lbnRzL0FrdWZlbi9sdW5jaC1hbmQtbGVhcm4vTVZDLTAxLTIwMTYvc3JjL2pzL2N1c3RvbS92aWV3cy9OYXZJdGVtLmpzXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0dmFsdWU6IHRydWVcbn0pO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgTmF2SXRlbSA9IGZ1bmN0aW9uICgpIHtcblx0ZnVuY3Rpb24gTmF2SXRlbShwYXJlbnRWaWV3LCBkYXRhLCBpZCkge1xuXHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOYXZJdGVtKTtcblxuXHRcdHBhcmVudFZpZXcuZmluZCgndWwnKS5hcHBlbmQoJzxsaSBjbGFzcz1cIm5hdi1pdGVtIG4nICsgaWQgKyAnXCIgZGF0YS1pZD1cIicgKyBpZCArICdcIj4nICsgZGF0YS5sYWJlbCArICc8L2xpPicpO1xuXG5cdFx0dGhpcy52aWV3ID0gcGFyZW50Vmlldy5maW5kKCd1bCAubmF2LWl0ZW0ubicgKyBpZCk7XG5cblx0XHR0aGlzLnZpZXcub24oJ21vdXNlb3ZlcicsIHRoaXMub25Nb3VzZU92ZXIuYmluZCh0aGlzKSk7XG5cdFx0dGhpcy52aWV3Lm9uKCdtb3VzZW91dCcsIHRoaXMub25Nb3VzZU91dC5iaW5kKHRoaXMpKTtcblx0fVxuXG5cdF9jcmVhdGVDbGFzcyhOYXZJdGVtLCBbe1xuXHRcdGtleTogJ29uTW91c2VPdmVyJyxcblx0XHR2YWx1ZTogZnVuY3Rpb24gb25Nb3VzZU92ZXIoKSB7XG5cblx0XHRcdHRoaXMudmlld1swXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuXHRcdH1cblx0fSwge1xuXHRcdGtleTogJ29uTW91c2VPdXQnLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiBvbk1vdXNlT3V0KCkge1xuXHRcdFx0dGhpcy52aWV3WzBdLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidHJhbnNwYXJlbnRcIjtcblx0XHR9XG5cdH1dKTtcblxuXHRyZXR1cm4gTmF2SXRlbTtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gTmF2SXRlbTtcblxufSx7fV19LHt9LFtcIi9Vc2Vycy9QUkFTUy9Eb2N1bWVudHMvQWt1ZmVuL2x1bmNoLWFuZC1sZWFybi9NVkMtMDEtMjAxNi9zcmMvanMvY3VzdG9tL01haW4uanNcIl0pXG5cbiIsImltcG9ydCBOYXYgZnJvbSAnLi92aWV3cy9OYXYnO1xuaW1wb3J0IENvbnRlbnQgZnJvbSAnLi92aWV3cy9Db250ZW50JztcbmltcG9ydCBDb250cm9sbGVyIGZyb20gJy4vY3RybC9Db250cm9sbGVyJztcbmltcG9ydCBEYXRhTWFuYWdlciBmcm9tICcuL21vZGVsL0RhdGFNYW5hZ2VyJztcblxuLyoqXG4gKiBcbiAqKi9cblxuY2xhc3MgTWFpbiB7XG5cblx0Y29uc3RydWN0b3IgKCkge1xuXG5cdFx0Y29uc29sZS5sb2coXCJFbnRyeSBQb2ludFwiKTtcblxuXHRcdCQoIHRoaXMuaW5pdC5iaW5kKHRoaXMpICk7XG5cdFx0Ly9kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCB0aGlzLmluaXQuYmluZCh0aGlzKSwgZmFsc2UpO1xuXG5cdH1cblxuXG5cdGluaXQgKCkge1xuXG5cdFx0Y29uc29sZS5sb2coXCJEb20gcmVhZHlcIik7XG5cblx0XHQvLyAxKSBDcmVhdGUgdmlld1xuXHRcdHRoaXMubmF2ID0gbmV3IE5hdigpO1xuXHRcdHRoaXMuY29udGVudCA9IG5ldyBDb250ZW50KCk7XG5cblx0XHQvLyAyKSBDcmVhdGUgQ29udHJvbGxlclxuXHRcdHRoaXMuY3RybCA9IG5ldyBDb250cm9sbGVyKCk7XG5cblx0XHQvLyAzKSBHZXQgRGF0YSAobW9kZWwpXG5cdFx0JCh3aW5kb3cpLm9uZSgnZGF0YV9sb2FkZWQnLCB0aGlzLnN0YXJ0LmJpbmQodGhpcykgKTtcblx0XHREYXRhTWFuYWdlci5sb2FkKCk7XG5cdFx0XG5cdH1cblxuXHRzdGFydCAoKSB7XG5cblx0XHRjb25zb2xlLmxvZygnc3RhcnQnKTtcblxuXHRcdHRoaXMubmF2LmJ1aWxkKCBEYXRhTWFuYWdlci5kYXRhLm5hdiApO1xuXG5cdH1cbn1cblxudmFyIGFwcCA9IG5ldyBNYWluKCk7IiwiaW1wb3J0IERhdGFNYW5hZ2VyIGZyb20gJy4uL21vZGVsL0RhdGFNYW5hZ2VyJztcblxuY2xhc3MgQ29udHJvbGxlciB7XG5cdFxuXG5cdGNvbnN0cnVjdG9yKCkge1xuXG5cdFx0JCh3aW5kb3cpLm9uKCduZXdfY29udGVudF9yZXF1ZXN0JywgdGhpcy5kaXNwbGF5TmV3Q29udGVudC5iaW5kKHRoaXMpICk7XG5cdH1cblxuXG5cdGRpc3BsYXlOZXdDb250ZW50IChldmVudCwgdGFyZ2V0SUQgKSB7XG5cblx0XHRjb25zb2xlLmxvZygnQ29udHJvbGxlciA6OiBSZXF1ZXN0IGZvciBuZXcgY29udGVudCcpO1xuXG5cdFx0Y29uc3QgcGljVXJsID0gRGF0YU1hbmFnZXIuZ2V0UGljKHRhcmdldElEKTtcblxuXHRcdCQod2luZG93KS50cmlnZ2VyKCdkaXNwbGF5X25ld19jb250ZW50JywgIHBpY1VybCk7XG5cblx0fVxuXG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udHJvbGxlcjsiLCJjbGFzcyBEYXRhTWFuYWdlciB7XG5cblxuXHRzdGF0aWMgbG9hZCgpIHtcblxuXHRcdCQuYWpheCh7XG4gICAgICAgICAgICB0eXBlICAgICAgICA6IFwiR0VUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZSAgICA6IFwianNvblwiLFxuICAgICAgICAgICAgdXJsICAgICAgICAgOiAnZGF0YS9kYXRhLmpzb24nICxcbiAgICAgICAgICAgIHN1Y2Nlc3MgICAgIDogKHJlc3BvbnNlKSA9PiB7XG5cbiAgICAgICAgICAgIFx0RGF0YU1hbmFnZXIuZGF0YSA9IHJlc3BvbnNlO1xuXG4gICAgICAgICAgICBcdCQod2luZG93KS50cmlnZ2VyKCdkYXRhX2xvYWRlZCcpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3IgICAgICAgOiAoZXJyKSA9PiB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhIGVycm9yOiBcIiwgZXJyKTsgfVxuICAgICAgICB9KTtcblxuXHR9XG5cblxuXHRzdGF0aWMgZ2V0UGljICggaXRlbUlEICkge1xuXG5cdFx0Y29uc29sZS5sb2coJ0RhdGFNYW5hZ2VyIDo6IGdldCBQaWMgOjogJyxEYXRhTWFuYWdlci5kYXRhLnBpY3NbaXRlbUlEXSk7XG5cblx0XHRyZXR1cm4gRGF0YU1hbmFnZXIuZGF0YS5waWNzW2l0ZW1JRF07XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0YU1hbmFnZXI7IiwiXG5cbmNsYXNzIENvbnRlbnQge1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdGNvbnNvbGUubG9nKCdDb250ZW50Jyk7XG5cblx0XHR0aGlzLnZpZXcgPSAkKCdzZWN0aW9uLmNvbnRlbnQnKTtcblxuXHRcdCQod2luZG93KS5vbignZGlzcGxheV9uZXdfY29udGVudCcsIHRoaXMub25EaXNwbGF5TmV3Q29udGVudC5iaW5kKHRoaXMpICk7XG5cdH1cblxuXHRvbkRpc3BsYXlOZXdDb250ZW50KGV2ZW50LCBwaWNVcmwpIHtcblxuXHRcdGNvbnNvbGUubG9nKCdDb250ZW50IDo6IERpc3BsYXkgbmV3IGNvbnRlbnQgJyk7XG5cblx0XHR0aGlzLnZpZXdbMF0uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnK3BpY1VybCsnKSc7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udGVudDsiLCJpbXBvcnQgTmF2SXRlbSBmcm9tICcuL05hdkl0ZW0nO1xuXG5jbGFzcyBOYXYge1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXG5cdFx0dGhpcy52aWV3ID0gJCgnbmF2Jyk7XG5cdFx0XG5cdH1cblxuXHRidWlsZCggbmF2RGF0YSApIHtcblxuXHRcdCQuZWFjaCggbmF2RGF0YSwgKGksZGF0YSk9PntcblxuXHRcdFx0bGV0IGl0ZW0gPSBuZXcgTmF2SXRlbSggdGhpcy52aWV3LCBkYXRhLCBpKTtcblxuXHRcdH0pO1xuXG5cblx0XHRsZXQgbmF2SXRlbXMgPSB0aGlzLnZpZXcuZmluZCgnLm5hdi1pdGVtJyk7XG5cblx0XHRuYXZJdGVtcy5vbignY2xpY2snLCB0aGlzLm9uQ2xpY2tOYXZJdGVtLmJpbmQodGhpcykgKTtcblxuXHR9XG5cblx0b25DbGlja05hdkl0ZW0gKCBldmVudCApIHtcblxuXHRcdGNvbnN0IHRhcmdldElEID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuXG5cdFx0Y29uc29sZS5sb2coJ05hdiA6OiBDbGljayBvbiBpdGVtICMnLCB0YXJnZXRJRCk7XG5cblx0XHQkKHdpbmRvdykudHJpZ2dlcignbmV3X2NvbnRlbnRfcmVxdWVzdCcsIHRhcmdldElEICk7XG5cblx0fVxuXHRcblxufVxuXG5leHBvcnQgZGVmYXVsdCBOYXY7IiwiY2xhc3MgTmF2SXRlbSB7XG5cblx0Y29uc3RydWN0b3IgKCBwYXJlbnRWaWV3LCBkYXRhLCBpZCApIHtcblxuXHRcdHBhcmVudFZpZXcuZmluZCgndWwnKS5hcHBlbmQoJzxsaSBjbGFzcz1cIm5hdi1pdGVtIG4nK2lkKydcIiBkYXRhLWlkPVwiJytpZCsnXCI+JysgZGF0YS5sYWJlbCArJzwvbGk+Jyk7XG5cblx0XHR0aGlzLnZpZXcgPSBwYXJlbnRWaWV3LmZpbmQoJ3VsIC5uYXYtaXRlbS5uJytpZCk7XG5cblx0XHR0aGlzLnZpZXcub24oJ21vdXNlb3ZlcicsIHRoaXMub25Nb3VzZU92ZXIuYmluZCh0aGlzKSApO1xuXHRcdHRoaXMudmlldy5vbignbW91c2VvdXQnLCB0aGlzLm9uTW91c2VPdXQuYmluZCh0aGlzKSApO1xuXHR9XG5cblx0b25Nb3VzZU92ZXIgKCkge1xuXG5cdFx0dGhpcy52aWV3WzBdLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG5cblx0fVxuXG5cdG9uTW91c2VPdXQgKCkge1xuXHRcdHRoaXMudmlld1swXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInRyYW5zcGFyZW50XCI7XG5cdH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBOYXZJdGVtOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
